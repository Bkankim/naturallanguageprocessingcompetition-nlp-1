# Model Screening Configuration - Qwen3-4B Only
# QLoRA 4bit + W&B + Disk Management

general:
  data_path: "../data/"
  result_path: "./screening_results/"
  max_disk_usage_gb: 80  # 최대 디스크 사용량 (GB)

# 스크리닝 대상 모델 목록 (TF32 최적화)
models:
  - model_name: "Qwen/Qwen3-4B-Instruct-2507"
    nickname: "Qwen3-4B-Instruct"
    description: "Qwen3 4B Instruct 2507 (SOLAR replacement)"

# Tokenizer 설정
tokenizer:
  encoder_max_len: 512
  decoder_max_len: 100
  # BOS/EOS 토큰은 토크나이저에서 자동으로 읽어옴 (하드코딩 제거)
  # Special tokens - 대화 데이터에 포함된 특수 토큰들
  special_tokens:
    - "#Person1#"
    - "#Person2#"
    - "#Person3#"
    - "#PhoneNumber#"
    - "#Address#"
    - "#PassportNumber#"

# QLoRA 설정 (4bit 양자화) - 큰 모델은 필수
qlora:
  load_in_4bit: true  # 30B, 32B, 10.7B 모델은 4bit 필수
  bnb_4bit_compute_dtype: "bfloat16"
  bnb_4bit_quant_type: "nf4"
  bnb_4bit_use_double_quant: true

# 추론 설정
inference:
  batch_size: 16  # 4bit이므로 더 큰 배치 가능
  no_repeat_ngram_size: 2
  early_stopping: true
  generate_max_length: 100
  num_beams: 4
  remove_tokens:
    - "<usr>"
    - "</s>"
    - "<pad>"
    - "<unk>"

# W&B 설정
wandb:
  enabled: true  # W&B 로깅 활성화
  project: "dialogue-summarization-screening"
  entity: null  # 개인 계정 사용 시 null
  name_prefix: "screening-qwen3"
  tags:
    - "model-screening"
    - "qlora-4bit"
    - "dev-set"
    - "qwen3-4b"

# 디스크 관리
disk_management:
  check_before_download: true
  check_after_inference: true
  auto_cleanup_cache: true  # 모델 평가 후 HuggingFace 캐시 삭제
  cleanup_checkpoints: true  # 임시 체크포인트 삭제
  keep_results_only: true   # 결과 CSV만 유지